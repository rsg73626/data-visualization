
<!DOCTYPE html>

<html lang = "en">
    <head>
        <meta charset = "UTF-8">
        
        <title> DV - Space and time </title>

        <script src = "./js/script.js"></script>

        <script src="https://d3js.org/d3.v3.min.js"></script>
        <script src="https://d3js.org/d3-queue.v2.min.js"></script>
        <script src="https://d3js.org/topojson.v1.min.js"></script>
        <script src="./js/chart/9-spaceandtime.js"></script>

        <link rel="stylesheet" href="./css/style.css"/>

    </head>

    <body>

        <header>

            <nav w3-include-html="../../menu/menu.html"></nav> 

            <h1> Space and Time </h1>

        </header>

        <main>

            <section id="inputs">

                <label> 
                    <span> Title: </span>    
                    <input id="title" type="text" placeholder="Chart title" value="Casos de CoronavÃ­rus no Brasil"/>
                </label>

                <label title="The CSV file to compose the visualization."> 
                    <span> CSV File Path: </span>
                    <input id="file" type="text" placeholder="ex: data.csv" value="./src/covid-19/data.csv"/>
                </label>

                <label> 
                    <span> Chart Width:  </span>
                    <input id="width" type="number" min="500" placeholder="Chart Width (min 500)" value="700"/>
                </label>
                
                <label> 
                    <span> Chart Height: </span>
                    <input id="height" type="number" min="500" placeholder="Column Height (min 500)" value="500"/>
                </label>

                <label title="The RGB color to create the color scale."> 
                    <span> Color: </span>
                    <input id="color" type="text" placeholder="ex: 100;100;100"/>
                </label>

                <button onclick="javascript:generateSpaceAndTimeChartButtonClick()"> Generate </button>

            </section>

        </main>

        <section id="charts">

        </section>

        <script>

            function generateSpaceAndTimeChartButtonClick() {
                clearErrors()

                var title  = document.getElementById('title').value
                var file   = document.getElementById('file').value
                var width  = document.getElementById('width').value
                var height = document.getElementById('height').value
                var color  = document.getElementById('color').value

                if (width < 500) { width = 500 }
                if (height < 500) { height = 500}

                if (color.trim() != '') { 
                    color = color.trim().split(';') 
                    if (color.labels < 3) {
                        color = null
                    } else {
                        var colorValues = []
                        color.forEach(function(c){
                            var value = Number(c)
                            if (!isNaN(value) && value >= 0 && value <= 255) {
                                colorValues.push(value)
                            }
                        })
                        if (colorValues.length < 3) {
                            color = null
                        } else {
                            color = colorValues
                        }
                    }
                } else { 
                    color = null
                }

                print(title)
                print(file)
                print(width)
                print(height)
                print(color)
            }

            var currentYear = 2019

            function didChangeYearValue() {
                var year = document.getElementById('year').value
                currentYear = year
                d3.select('#year-value').text(currentYear)
                updateChart(currentYear)
            }

            // drawMap()
            // drawLegend()

        </script>

        <script> createNavigationMenu(null, '../../') </script>

    </body>

</html>